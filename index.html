<!DOCTYPE html>
<html lang="bs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vaktija USK</title>

<style>
body{
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg,#0f172a,#1e293b);
    color:white;
    margin:0;
    padding:20px;
    text-align:center;
}

h2{
    margin-bottom:5px;
}

#sat{
    font-size:18px;
    margin-bottom:20px;
    opacity:0.8;
}

select,button,input{
    padding:8px;
    margin:5px;
    border-radius:8px;
    border:none;
}

button{
    background:#16a34a;
    color:white;
    cursor:pointer;
}

button:hover{
    background:#15803d;
}

.namaz-container{
    max-width:400px;
    margin:0 auto;
}

.namaz{
    background:#1e293b;
    margin:12px 0;
    padding:18px;
    border-radius:15px;
    box-shadow:0 4px 15px rgba(0,0,0,0.4);
    font-size:20px;
    display:flex;
    justify-content:space-between;
    align-items:center;
}

.namaz span{
    font-weight:bold;
    font-size:22px;
}

.admin{
    margin-top:25px;
    background:#111827;
    padding:20px;
    border-radius:15px;
    max-width:400px;
    margin-left:auto;
    margin-right:auto;
}

.admin input{
    width:60px;
    text-align:center;
}
</style>
</head>

<body>

<h2>Vaktija USK (Hanefijski)</h2>

<select id="grad">
<option value="krupa">Bosanska Krupa</option>
<option value="kladusa">Velika Kladuša</option>
</select>

<h3 id="sat"></h3>

<div class="namaz-container">

<div class="namaz">
    <div>Fajr</div>
    <span id="fajr"></span>
</div>

<div class="namaz">
    <div>Podne</div>
    <span id="dhuhr"></span>
</div>

<div class="namaz">
    <div>Ikindija</div>
    <span id="asr"></span>
</div>

<div class="namaz">
    <div>Akšam</div>
    <span id="maghrib"></span>
</div>

<div class="namaz">
    <div>Jacija</div>
    <span id="isha"></span>
</div>

</div>

<button onclick="login()">Admin</button>

<div id="adminPanel" class="admin" style="display:none;">
<h3>Admin Podešavanje (minute)</h3>

Fajr <input type="number" id="fajr_offset" value="0"><br>
Dhuhr <input type="number" id="dhuhr_offset" value="0"><br>
Asr <input type="number" id="asr_offset" value="0"><br>
Maghrib <input type="number" id="maghrib_offset" value="0"><br>
Isha <input type="number" id="isha_offset" value="0"><br>

<button onclick="saveOffsets()">Spasi</button>
</div>

<audio id="beep">
<source src="beep.mp3" type="audio/mpeg">
</audio>

<script>

var ADMIN_PASSWORD = "1234";

var offsets = {
    fajr:0,dhuhr:0,asr:0,maghrib:0,isha:0
};

function login(){
    var pass = prompt("Unesi admin lozinku:");
    if(pass === ADMIN_PASSWORD){
        document.getElementById("adminPanel").style.display="block";
        ucitajOffset();
    }else{
        alert("Pogrešna lozinka");
    }
}

function ucitajOffset(){
    let o = localStorage.getItem("offsets");
    if(o){
        offsets = JSON.parse(o);
        document.getElementById("fajr_offset").value = offsets.fajr;
        document.getElementById("dhuhr_offset").value = offsets.dhuhr;
        document.getElementById("asr_offset").value = offsets.asr;
        document.getElementById("maghrib_offset").value = offsets.maghrib;
        document.getElementById("isha_offset").value = offsets.isha;
    }
}

function saveOffsets(){
    offsets.fajr = parseInt(document.getElementById("fajr_offset").value)||0;
    offsets.dhuhr = parseInt(document.getElementById("dhuhr_offset").value)||0;
    offsets.asr = parseInt(document.getElementById("asr_offset").value)||0;
    offsets.maghrib = parseInt(document.getElementById("maghrib_offset").value)||0;
    offsets.isha = parseInt(document.getElementById("isha_offset").value)||0;
    localStorage.setItem("offsets", JSON.stringify(offsets));
    alert("Spašeno!");
    update();
}

function formatTime(d){
    return ("0"+d.getHours()).slice(-2)+":"+("0"+d.getMinutes()).slice(-2);
}

function addMinutes(date, mins){
    return new Date(date.getTime() + mins*60000);
}

function calculateTimes(){

    var now = new Date();

    var fajr = new Date(now.getFullYear(), now.getMonth(), now.getDate(),5,30);
    var dhuhr = new Date(now.getFullYear(), now.getMonth(), now.getDate(),12,15);
    var asr = new Date(now.getFullYear(), now.getMonth(), now.getDate(),15,45);
    var maghrib = new Date(now.getFullYear(), now.getMonth(), now.getDate(),17,40);
    var isha = new Date(now.getFullYear(), now.getMonth(), now.getDate(),19,00);

    fajr = addMinutes(fajr, offsets.fajr);
    dhuhr = addMinutes(dhuhr, offsets.dhuhr);
    asr = addMinutes(asr, offsets.asr);
    maghrib = addMinutes(maghrib, offsets.maghrib);
    isha = addMinutes(isha, offsets.isha);

    document.getElementById("fajr").innerHTML = formatTime(fajr);
    document.getElementById("dhuhr").innerHTML = formatTime(dhuhr);
    document.getElementById("asr").innerHTML = formatTime(asr);
    document.getElementById("maghrib").innerHTML = formatTime(maghrib);
    document.getElementById("isha").innerHTML = formatTime(isha);

    var trenutno = formatTime(now);
    var lista = [
        formatTime(fajr),
        formatTime(dhuhr),
        formatTime(asr),
        formatTime(maghrib),
        formatTime(isha)
    ];

    if(lista.includes(trenutno)){
        document.getElementById("beep").play();
    }
}

function update(){
    document.getElementById("sat").innerHTML =
        "Trenutno vrijeme: " + new Date().toLocaleTimeString();
    calculateTimes();
}

update();
setInterval(update,1000);

</script>

</body>
</html>
