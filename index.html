<!DOCTYPE html>
<html lang="bs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vaktija USK FIX</title>

<style>
body{
margin:0;
font-family:'Segoe UI',sans-serif;
background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
color:white;
text-align:center;
}
h1{margin-top:15px;}
#clock{font-size:55px;font-weight:900;}
#nextPrayer{font-weight:bold;margin:10px;}
select,button,input{
padding:8px;
border-radius:10px;
border:none;
margin:5px;
}
.namaz-container{
display:grid;
grid-template-columns:repeat(2,1fr);
gap:15px;
padding:15px;
}
.namaz{
background:rgba(255,255,255,0.1);
padding:15px;
border-radius:15px;
}
.highlight{background:#00c6ff;color:black;}
footer{margin-top:20px;font-weight:bold;}
</style>
</head>

<body>

<h1>üïå Vaktija USK</h1>
<div id="clock"></div>
<div id="nextPrayer"></div>

<select id="citySelect" onchange="calculate()">
<option value="44.8167,15.8700">Bihaƒá</option>
<option value="44.9939,16.0067">Bosanska Krupa</option>
<option value="45.2036,15.8744">Velika Kladu≈°a</option>
<option value="44.9922,15.9833">Cazin</option>
<option value="44.8914,15.8006">Bu≈æim</option>
<option value="44.5461,16.0978">Kljuƒç</option>
<option value="44.7617,16.7108">Sanski Most</option>
<option value="44.7586,16.2183">Bosanski Petrovac</option>
</select>

<div class="namaz-container" id="namazi"></div>

<footer>by: AmelR.</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/praytimes/2.3.0/praytimes.min.js"></script>

<script>

const prayerNames=["fajr","dhuhr","asr","maghrib","isha"];
const displayNames={
fajr:"Sabah",
dhuhr:"Podne",
asr:"Ikindija",
maghrib:"Ak≈°am",
isha:"Jacija"
};

function updateClock(){
document.getElementById("clock").innerText =
new Date().toLocaleTimeString("bs-BA");
}
setInterval(updateClock,1000);
updateClock();

function calculate(){

if(typeof PrayTimes === "undefined"){
document.getElementById("namazi").innerHTML="<h2>Uƒçitavanje...</h2>";
setTimeout(calculate,500);
return;
}

const coords=document.getElementById("citySelect").value.split(",");
const lat=parseFloat(coords[0]);
const lon=parseFloat(coords[1]);

const prayTimes=new PrayTimes("MWL");
prayTimes.adjust({asr:"Hanafi"});

const date=new Date();

// SIGURAN timezone za BiH
const tz = 1 + (isDST(date)?1:0);

let times=prayTimes.getTimes(date,[lat,lon],tz);

let container=document.getElementById("namazi");
container.innerHTML="";

let nextFound=false;

for(let key of prayerNames){

let base=times[key];
if(!base) continue;

let parts=base.split(":");
let d=new Date();
d.setHours(parts[0],parts[1],0);

let finalTime=
d.getHours().toString().padStart(2,"0")+":"+
d.getMinutes().toString().padStart(2,"0");

let div=document.createElement("div");
div.className="namaz";
div.innerHTML="<h3>"+displayNames[key]+"</h3><p>"+finalTime+"</p>";
container.appendChild(div);

if(!nextFound && d>new Date()){
document.getElementById("nextPrayer").innerText=
"Sljedeƒái namaz: "+displayNames[key]+" u "+finalTime;
div.classList.add("highlight");
nextFound=true;
}
}

if(!nextFound){
document.getElementById("nextPrayer").innerText=
"Sljedeƒái namaz: Sabah sutra";
}

}

// provjera ljetnog raƒçunanja vremena
function isDST(d){
let jan=new Date(d.getFullYear(),0,1);
let jul=new Date(d.getFullYear(),6,1);
return Math.max(jan.getTimezoneOffset(),jul.getTimezoneOffset()) != d.getTimezoneOffset();
}

window.onload=function(){
setTimeout(calculate,300);
};

</script>

</body>
</html>
